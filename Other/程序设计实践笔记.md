# 程序设计实践



## 第1章：风格

风格的作用主要就是使代码容易读，无论是对程序员本人，还是对其他人。好的风格对于好的程序设计具有关键性作用。

程序设计风格的原则根源于由实际经验中得到的常识，它不是随意的规则或者处方。代码应该是清楚的和简单的，具有如下特性：

- 具有直截了当的逻辑（控制流）。
- 自然的表达式。
- 通行的语言使用方式（惯用法）。
- 有意义的名字。
- 有帮助作用的注释。
- 具有一致性。
- ...

### 1.1 名字

什么是名字？一个变量或函数的名字标识这个对象，带着说明其用途的一些信息。

> **:one:一个变量的作用域越大，它的名字所携带的信息就应该越多。**

全局变量可以出现在整个程序中的任何地方，因此它的名字应该足够长，具有足够的说明性，以便读者能够记得它们是干什么用的，即全局变量应该使用具有说明性的名字。而对于局部变量，使用短名字即可。按常规方式使用的局部变量可以采用极短的名字，例如用`i`、`j`作为循环遍历，`p`、`q`作为指针，`s`、`t`表示字符串等。这些名字使用得非常普遍，采用更长的名字不会有什么益处或收获。



> **:two:保持一致性，相关的东西给以相关的名字，以说明他们的关系和差异。**



> **:three:函数采用动作性名字。**

函数名应该用动作性的动词，后面可以跟着名词。这样做更能体现函数的行为。另外对于返回布尔类型值（真假）的函数命名，应该清楚地反映其返回值情况。例如：

```c
// checkoctal不好，无法反映返回值情况，不知道什么时候返回真什么时候返回假。
if (checkoctal(c))
    // ...

// isoctal好，清楚地反映返回值情况，是octal返回真，不是octal返回假。
if (isoctal(c))
    // ...
```





### 1.2 表达式和语句







### 1.3 一致性和习惯用法

一致性带来的将是更好的程序。如果



> **:one:使用一致的缩排和加括号风格**

缩排可以显示出程序的结构，那么什么样的缩排风格最好呢？对于这些缩排风格存在一些争议：

- 是把花括号放在`if`的同一行，还是放在下面一行？

- 应该在那些并不必须使用花括号的地方都加上它们吗？

实际上，特定风格远没有一致地使用它们重要。因此不要为了选择而苦恼，应该取一种风格，然后一致地使用它们。







### 1.4 函数宏





### 1.5 神秘的数



### 1.6 注释

注释是帮助程序读者的一种手段。但是，如果在注释中只说明代码本身已经讲明的事情，或者与代码矛盾，或是以精心编排的形式干扰读者，那么它们就是帮了倒忙。最好的注释是简洁地点明程序的突出特征，或是提供一种概观，帮助别人理解程序。

> **:one:注释应该提供那些不能一下子从程序中看到的东西，或者把那些散布在许多代码里的信息集中在一起。**



> :two:**给函数和全局数据加注释。**



> **:three:不要注释差代码，重写它。**



> **:four:不要与代码矛盾。**



> **:five:澄清情况，不要添乱。**



## 第5章：排错

